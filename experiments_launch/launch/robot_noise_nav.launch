<launch>

<!-- Launch file for use on robot computer. Runs the nodes on robot -->

  
<!-- RosAria pioneer drivers -->
<node pkg="rosaria" type="RosAria" name="RosAria" >
  <param name="port" value="/dev/ttyUSB0" />
  <param name="trans_decel" value="1"/>
  <param name="trans_accel" value="0.5"/>
  <param name="rot_accel" value="2"/>
  <remap from="/RosAria/cmd_vel" to="/cmd_vel" />
  <remap from="/RosAria/pose" to="odom" />
   </node>


<!-- hokuyo laser scaner drivers -->
  <node pkg="urg_node" type="urg_node" respawn="false" output="screen" name="hokuyo">
    <param name="frame_id" type="string" value="base_laser"/>
    <param name="calibrate_time" type="bool" value="true"/> <!-- Starts up slow, but accurate timestamps  --> 
    <param name="port" type="string" value="/dev/ttyACM0"/> <!-- Set the port to connect to here -->
    <param name="publish_intensity" type="bool" value="false"/>
    <param name="angle_max" type="double" value="1.92"/>
    <param name="angle_min" type="double" value="-1.92"/>
   </node>

<!-- Filter laser scan to remove veiling effect -->
<node pkg="laser_filters" type="scan_to_scan_filter_chain" name="laser_filter">
    <rosparam command="load" file="$(find experiments_launch)/config/laser_filter.yaml" />
</node>

<!-- Laser noise node to add some extra noise-->
  <node respawn="true" pkg="laser_noise" type="laser_noise_node" name="laser_noise" > 
      <remap from="/scan" to="/scan_filtered" />
      <remap from="/scan_with_noise" to="/scan_final" />
  </node>

<!-- tf transform -->
<!-- args ="x y z qx qy qz frame_id child_frame_id period_in_ms" -->
<node pkg="tf" type="static_transform_publisher" name="base_link_to_laser" args="0.20 0 0.20 0 0 0 /base_link /base_laser 25" />


<!-- Gmapping SLAM -->
<include file="$(find experiments_launch)/launch/slam_gmapping.launch"/>

<!-- Hector SLAM -->
<!--include file="$(find experiments_launch)/launch/hector_slam.launch"/-->

<!-- Navigation stuff / move_base -->
<include file="$(find experiments_launch)/launch/move_base.launch"/>

<!-- usb_cam -->
<include file="$(find experiments_launch)/launch/usb_cam.launch"/>

<!-- Frontier exploration -->
 <!--include file="$(find experiments_launch)/launch/frontier_exploration.launch"/-->

<!-- MAP server to load the predefined map -->
 <!-- <arg name="map_file" default="$(find experiments_launch)/world/map.yaml" />

  <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" >
    <remap from="/map" to="/mapAmcl" />
  </node>

<node pkg="amcl" type="amcl" name="amcl" respawn="true">
   <remap from="scan" to="scan_filtered" />

  <!-- Set initial position -->
   <!-- <param name="initial_pose_x" value="0"/>
  <param name="initial_pose_y" value="0"/>

  <!-- General parameters -->
  <!-- <param name="min_particles" value="500"/>
  <param name="max_particles" value="5000"/>
  <param name="kld_err" value="0.01"/>
  <param name="kld_z" value="0.99"/>
  <param name="update_min_d" value="0.15"/>
  <param name="update_min_a" value="0.3"/>
  <param name="resample_interval" value="2"/>
  <param name="transform_tolerance" value="0.1" />
  <param name="recovery_alpha_slow" value="0.0"/>
  <param name="recovery_alpha_fast" value="0.0"/>
  <param name="gui_publish_rate" value="-1.0"/>
  
  <param name="global_frame_id" value="mapAcml"/>


  <!-- Odometry model parameters -->
  <!-- <param name="odom_frame_id" value="odom"/>
  <param name="base_frame_id" value="base_link"/>
  <param name="global_frame_id" value="map"/>
  <param name="odom_model_type" value="diff"/>
  <param name="odom_alpha1" value="0.35"/>
  <param name="odom_alpha2" value="0.35"/>
  <param name="odom_alpha3" value="0.35"/>
  <param name="odom_alpha4" value="0.35"/>
 

  <!-- Laser model parameters -->
  <!--param name="laser_z_hit" value="0.5"/>
  <param name="laser_z_short" value="0.05"/>
  <param name="laser_z_max" value="0.05"/>
  <param name="laser_z_rand" value="0.5"/>
  <param name="laser_sigma_hit" value="0.2"/>
  <param name="laser_lambda_short" value="0.1"/>
  <param name="laser_lambda_short" value="0.1"/>
  <param name="laser_likelihood_max_dist" value="2.0"/>
  <param name="laser_max_beams" value="30"/>
  <param name="laser_model_type" value="likelihood_field"/-->
 <!--/node--> 


</launch>
